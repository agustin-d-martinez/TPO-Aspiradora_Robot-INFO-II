/*******************************************************************************************************************************//**
 *
 * @file		MRThandler.cpp
 * @brief		Handler del timer MRT
 * @date		2 sep. 2022
 * @author		Técnico Martinez Agustin
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include <Drivers/13-MultiRateTimer/MRThandler.h>
/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** IMPLEMENTACION DE LOS METODODS DE LA CLASE
 **********************************************************************************************************************************/
MRThandler::MRThandler( MRT_timer_channels _timer_number ) : m_timer_channel( _timer_number )
{ }
/**
	\fn void MRT_reset_time(void)
	\brief Resetea el timer.
 	\details Vuelve a cargar el tiempo máximo en el registro.
	\return void
*/
void MRThandler::MRT_reset_time ( void )
{
		(MRT + m_timer_channel)->LOAD = 1;
		(MRT + m_timer_channel)->IVALUE = 0x7FFFFFFF;
		(MRT + m_timer_channel)->LOAD = 0;
}
/**
	\fn uint32_t MRT_get_time(void)
	\brief Devuelve el valor del timer en el momento actual.
 	\details Lee el registro del contador MRT del canal correspondiente.
	\return devuelve el valor del timer
*/
uint32_t MRThandler::MRT_get_time ( void )
{
	return ((MRT + m_timer_channel)->VALUE);
}
